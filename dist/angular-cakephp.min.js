/*!
 * angular-cakephp v0.5.0
 * http://intellipharm.com/
 *
 * Copyright 2015 Intellipharm
 *
 * 2015-08-24 12:32:57
 *
 */
!function(){"use strict";angular.module("AngularCakePHP",[])}(),function(){"use strict";angular.module("AngularCakePHP").value("AngularCakePHPApiUrl","").value("AngularCakePHPTimestamps",!0).value("AngularCakePHPApiEndpointTransformer",null).value("AngularCakePHPUrlParamTransformer",null).value("AngularCakePHPApiIndexResponseTransformer",null).value("AngularCakePHPApiViewResponseTransformer",null).value("AngularCakePHPApiEditResponseTransformer",null).value("AngularCakePHPApiAddResponseTransformer",null).value("AngularCakePHPApiDeleteResponseTransformer",null).value("AngularCakePHPApiValidateResponseTransformer",null).value("AngularCakePHPApiValidateErrorResponseTransformer",null).value("AngularCakePHPApiErrorResponseTransformer",null)}(),function(){"use strict";function a(){this.model=null}var b="Missing Required Params",c="Name argument is required",d="Name argument needs to be a string",e="Name argument is not in the object",f="Name argument is not a virtual field",g="Value argument is required",h="Value argument needs to be a function";a.$inject=[],a.prototype.extend=function(c,d){if(_.isUndefined(c)||!_.has(c,"active_record_class")||_.isUndefined(c.active_record_class)||_.isUndefined(d))throw new Error(b);c.active_record_class.prototype=Object.create(a.prototype);var e=new c.active_record_class(d);return c.config.timestamps&&(e.created=d.created,e.modified=d.modified),Object.defineProperty(e,"model",{configurable:!1,enumerable:!1,value:c,writable:!1}),e},a.prototype.clone=function(){return this.new(this)},a.prototype.save=function(a){return this.id?this.model.edit(this.id,this,a):this.model.add(this,a)},a.prototype.new=function(a){return this.model.new(a)},a.prototype.delete=function(){return this.model.delete(this.id)},a.prototype.validate=function(a){return this.model.validate(this,a)},a.prototype.api=function(a,b,c){return this.model.api(a,b,c,this)},a.prototype.getClassName=function(){return this.model&&this.model.active_record_class?this.model.active_record_class.name:null},a.prototype.virtualField=function(a,b){var e;if(!a)throw new Error(c);if("string"!=typeof a)throw new Error(d);if(!b)throw new Error(g);if("function"!=typeof b)throw new Error(h);return Object.defineProperty(this,a,{enumerable:!1,configurable:!1,get:function(){return e},set:function(){return e=b.apply(this)}}),this.virtualFieldUpdate(a),this},a.prototype.virtualFieldUpdate=function(a){if(!a)throw new Error(c);if("string"!=typeof a)throw new Error(d);if(!_.has(this,a))throw new Error(e);if(this.propertyIsEnumerable(a))throw new Error(f);return this[a]="",this},angular.module("AngularCakePHP").service("BaseActiveRecord",a)}(),function(){"use strict";function a(a,j,l,m,n,o,p,q,r){b=a,c=j,d=l,i=m,e=n,f=o,g=p,h=q;try{k=c.get("AngularCakePHPApiEndpointTransformer")}catch(a){}this.active_record_class=null,this.config={api:i,api_endpoint:null,timestamps:r}}var b,c,d,e,f,g,h,i,j="Missing Required Params",k=null;a.$inject=["$http","$injector","$q","AngularCakePHPApiUrl","UtilService","HttpResponseService","TransformerService","BaseActiveRecord","AngularCakePHPTimestamps"],a.prototype.extend=function(b,c){if(c.prototype.name||Object.defineProperty(c.prototype,"name",{get:function(){var a=/function\s([^(]{1,})\(/,b=a.exec(this.toString());return b&&b.length>1?b[1].trim():""},set:function(){}}),_.isUndefined(b)||_.isUndefined(c))throw new Error(j);b.prototype=Object.create(a.prototype);var d=new b;return d.active_record_class=c,d.config=_.merge(_.clone(this.config),d.config),_.isNull(d.config.api_endpoint)&&(d.config.api_endpoint=_.snakeCase(d.active_record_class.name),_.isNull(k)||(d.config.api_endpoint=k(d.config.api_endpoint))),d},a.prototype.new=function(a){_.isUndefined(a)&&(a={});var b=h.extend(this,a);return _.forEach(a,function(a,c){if(_.isArray(a)){var d=e.getAssociationArray(a,c);_.isEmpty(d)||(b[c]=d)}else if(_.isObject(a)){var f=e.getAssociation(a,c);f!==!1&&(b[c]=f)}},this),b},a.prototype.index=function(a){var c=this;return d(function(d,e){var h=g.transformRequestUrl(c.config.api,c.config.api_endpoint,a);b.get(h).success(function(a,b,g,h){f.handleIndexResponse(d,e,c,a,b,g,h)}).error(function(a,b,g,h){f.handleErrorResponse(d,e,c,a,b,g,h)})})},a.prototype.view=function(a,c){var e=this;if(_.isNull(a)||_.isUndefined(a))throw new Error(j);return d(function(d,h){var i=g.transformRequestUrl(e.config.api,e.config.api_endpoint,c,a);b.get(i).success(function(a,b,c,g){f.handleViewResponse(d,h,e,a,b,c,g)}).error(function(a,b,c,g){f.handleErrorResponse(d,h,e,a,b,c,g)})})},a.prototype.add=function(a,c){var e=this;if(_.isNull(a)||_.isUndefined(a))throw new Error(j);return d(function(d,h){var i=g.transformRequestUrl(e.config.api,e.config.api_endpoint,c);a=g.transformRequestData(a),b.post(i,a).success(function(a,b,c,g){f.handleAddResponse(d,h,e,a,b,c,g)}).error(function(a,b,c,g){f.handleErrorResponse(d,h,e,a,b,c,g)})})},a.prototype.edit=function(a,c,e){var h=this;if(_.isNull(a)||_.isUndefined(a))throw new Error(j);if(_.isNull(c)||_.isUndefined(c))throw new Error(j);return d(function(d,i){var j=g.transformRequestUrl(h.config.api,h.config.api_endpoint,e,a);c=g.transformRequestData(c),b.put(j,c).success(function(a,b,c,e){f.handleEditResponse(d,i,h,a,b,c,e)}).error(function(a,b,c,e){f.handleErrorResponse(d,i,h,a,b,c,e)})})},a.prototype.delete=function(a){var c=this;if(_.isNull(a)||_.isUndefined(a))throw new Error(c.ERROR_MISSING_PARAMS);return d(function(d,e){var h=g.transformRequestUrl(c.config.api,c.config.api_endpoint,null,a);b.delete(h).success(function(a,b,g,h){f.handleDeleteResponse(d,e,c,a,b,g,h)}).error(function(a,b,g,h){f.handleErrorResponse(d,e,c,a,b,g,h)})})},a.prototype.validate=function(a,c){var e=this;if(_.isNull(a)||_.isUndefined(a))throw new Error(e.ERROR_MISSING_PARAMS);return d(function(d,h){var i=null;_.isUndefined(c)||(i={fields:c.join(",")});var j=g.transformRequestUrl(e.config.api,e.config.api_endpoint+"/validation",i),k=a;b.post(j,k).success(function(a,b,c,g){f.handleValidateResponse(d,h,e,a,b,c,g)}).error(function(a,b,c,g){f.handleValidateErrorResponse(d,h,e,a,b,c,g)})})},a.prototype.api=function(a,c,d,e){var f=this;if(_.isUndefined(c)&&(c="GET"),_.isUndefined(d)&&(d={}),_.isUndefined(e)&&(e={}),c=c.toUpperCase(),_.isNull(a)||_.isUndefined(a))throw new Error(f.ERROR_MISSING_PARAMS);var h=g.transformRequestUrl(f.config.api,f.config.api_endpoint+"/"+a,d),i={method:c,url:h};return"POST"===c&&(i.data=e),b(i)},angular.module("AngularCakePHP").service("AngularCakePHPBaseModel",a)}(),function(){"use strict";var a=function(){};a.$inject=[],angular.module("AngularCakePHP").service("HttpRequestService",a)}(),function(){"use strict";var a=function(a,b){this.handleIndexResponse=function(c,d,e,f,g,h,i){var j=a.transformResponseDataList(f.data,e),k=b.get("AngularCakePHPApiIndexResponseTransformer");_.isFunction(k)?k(c,d,e,f,g,h,i,j):c({data:j})},this.handleViewResponse=function(c,d,e,f,g,h,i){var j=a.transformResponseData(f.data,e),k=b.get("AngularCakePHPApiViewResponseTransformer");_.isFunction(k)?k(c,d,e,f,g,h,i,j):c({data:j})},this.handleAddResponse=function(c,d,e,f,g,h,i){var j=a.transformResponseData(f.data,e),k=b.get("AngularCakePHPApiEditResponseTransformer");_.isFunction(k)?k(c,d,e,f,g,h,i,j):c({data:j,message:f.message})},this.handleEditResponse=function(c,d,e,f,g,h,i){var j=a.transformResponseData(f.data,e),k=b.get("AngularCakePHPApiAddResponseTransformer");_.isFunction(k)?k(c,d,e,f,g,h,i,j):c({data:j,message:f.message})},this.handleDeleteResponse=function(a,c,d,e,f,g,h){var i=b.get("AngularCakePHPApiDeleteResponseTransformer");_.isFunction(i)?i(a,c,d,e,f,g,h):a({message:e.message})},this.handleValidateResponse=function(a,c,d,e,f,g,h){var i=b.get("AngularCakePHPApiValidateResponseTransformer");_.isFunction(i)?i(a,c,d,e,f,g,h):a({message:e.message})},this.handleValidateErrorResponse=function(a,c,d,e,f,g,h){var i=b.get("AngularCakePHPApiValidateErrorResponseTransformer");_.isFunction(i)?i(a,c,d,e,f,g,h):c({data:e.data,message:e.message})},this.handleErrorResponse=function(a,c,d,e,f,g,h){var i=b.get("AngularCakePHPApiErrorResponseTransformer");_.isFunction(i)?i(a,c,d,e,f,g,h):c({data:e.data,message:e.message})}};a.$inject=["TransformerService","$injector"],angular.module("AngularCakePHP").service("HttpResponseService",a)}(),function(){"use strict";var a=function(a){var b=null;try{b=a.get("AngularCakePHPUrlParamTransformer")}catch(a){}this.transformRequestUrl=function(a,c,d,e){var f=[];_.isUndefined(d)||_.isNull(d)||_.isEmpty(d)||(_.isNull(b)?_.forEach(d,function(a,b){b&&a&&f.push(b+"="+a)}):f=b(d));var g="";_.isArray(f)&&f.length>0?g="?"+f.join("&"):f.length>0&&(g="?"+f);var h=_.isUndefined(e)||_.isNull(e)?"":"/"+e,i=a+"/"+c+h+g;return i=i.replace(/([^:]\/)\/+/g,"$1")},this.transformRequestData=function(a){return a},this.transformResponseDataList=function(a,b){var c=[];return _.forEach(a,function(a){c.push(this.transformResponseData(a,b))},this),c},this.transformResponseData=function(a,b){return _.merge(a,a[b.active_record_class.name]),delete a[b.active_record_class.name],b.new(a)}};a.$inject=["$injector"],angular.module("AngularCakePHP").service("TransformerService",a)}(),function(){"use strict";var a=function(a){var b=this;this.ERROR_MODEL_DOES_NOT_EXIST="Model does not exist",this.ERROR_NO_DATA="No Data",this.getAssociationArray=function(a,b){var c=[],d=b+"Model";return _.forEach(a,function(a){var e=this.getAssociation(a,b,d);e!==!1&&c.push(e)},this),c},this.getAssociation=function(c,d,e){if(_.isNumber(c))return c;if(_.isUndefined(e)&&(e=d+"Model"),_.has(c,"id")&&_.isNull(c.id))return console.warn(b.ERROR_NO_DATA+": "+e),!1;try{var f=a.get(e),g=f.new(c);return g}catch(a){return console.warn(b.ERROR_MODEL_DOES_NOT_EXIST+": "+e),!1}}};a.$inject=["$injector"],angular.module("AngularCakePHP").service("UtilService",a)}();
//# sourceMappingURL=angular-cakephp.min.map